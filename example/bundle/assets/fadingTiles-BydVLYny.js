import{W as _,S as T,a as P,O as R,G as S}from"./three.module-e-akeimH.js";/* empty css               */import{g as D}from"./lil-gui.module.min-Vka56b52.js";import{C as F}from"./CameraTransitionManager-Aw6C4CUi.js";import{E as y}from"./EnvironmentControls-BRJ_vGuv.js";import{T as p}from"./TilesRenderer-C3SKmAML.js";import{T as g}from"./TilesFadePlugin-Bg3AWZ7_.js";import"./I3DMLoader-BvoAYWAX.js";import"./readMagicBytes-CUUeQGnc.js";import"./GLTFLoader-uVyzW9cX.js";import"./Ellipsoid-Ctcbk2JV.js";import"./B3DMLoader-BmDNS6RO.js";import"./PNTSLoader-DzQ3_PKf.js";import"./CMPTLoader-Bq-8QR4v.js";import"./EllipsoidRegion-DVvlgLqj.js";let d,l,s,e,r,c,a;const t={reinstantiateTiles:w,fadeRootTiles:!1,useFade:!0,errorTarget:12,fadeDuration:.5,renderScale:1,fadingGroundTiles:"0 tiles",orthographic:!1,transitionDuration:.25};v();h();function v(){s=new _({antialias:!0}),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight),s.setClearColor(14208704),document.body.appendChild(s.domElement),l=new T,a=new F(new P(60,window.innerWidth/window.innerHeight,.25,4e3),new R(-1,1,1,-1,0,4e3)),a.camera.position.set(20,10,20),a.camera.lookAt(0,0,0),a.autoSync=!1,a.addEventListener("camera-change",({camera:m,prevCamera:u})=>{r.deleteCamera(u),e.deleteCamera(u),r.setCamera(m),e.setCamera(m),d.setCamera(m)}),d=new y(l,a.camera,s.domElement),d.minZoomDistance=2,d.cameraRadius=1,c=new S,c.rotation.set(Math.PI/2,0,0),l.add(c),w(),f(),window.addEventListener("resize",f,!1);const o=new D,n=o.addFolder("camera");n.add(t,"orthographic").onChange(m=>{a.fixedPoint.copy(d.pivotPoint),a.syncCameras(),d.adjustCamera(a.perspectiveCamera),d.adjustCamera(a.orthographicCamera),a.toggle()}),n.add(t,"transitionDuration",0,1.5);const i=o.addFolder("fade");i.add(t,"useFade"),i.add(t,"fadeRootTiles"),i.add(t,"errorTarget",0,1e3),i.add(t,"fadeDuration",0,5),i.add(t,"renderScale",.1,1,.05).onChange(m=>s.setPixelRatio(m*window.devicePixelRatio));const C=i.add(t,"fadingGroundTiles").listen().disable();C.domElement.style.opacity=1,o.add(t,"reinstantiateTiles"),o.open()}function w(){e&&(e.dispose(),e.group.removeFromParent(),r.dispose(),r.group.removeFromParent()),e=new p("https://raw.githubusercontent.com/NASA-AMMOS/3DTilesSampleData/master/msl-dingo-gap/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_colorize_tileset.json"),e.fetchOptions.mode="cors",e.lruCache.minSize=900,e.lruCache.maxSize=1300,e.errorTarget=12,e.registerPlugin(new g),e.setCamera(a.camera),r=new p("https://raw.githubusercontent.com/NASA-AMMOS/3DTilesSampleData/master/msl-dingo-gap/0528_0260184_to_s64o256_colorize/0528_0260184_to_s64o256_sky/0528_0260184_to_s64o256_sky_tileset.json"),r.fetchOptions.mode="cors",r.lruCache=e.lruCache,r.registerPlugin(new g),r.setCamera(a.camera),c.add(e.group,r.group)}function f(){const{perspectiveCamera:o,orthographicCamera:n}=a,i=window.innerWidth/window.innerHeight;n.bottom=-40,n.top=40,n.left=-40*i,n.right=40*i,n.updateProjectionMatrix(),o.aspect=i,o.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight)}function h(){requestAnimationFrame(h),d.enabled=!a.animating,d.update(),a.duration=1e3*t.transitionDuration,a.update();const o=a.camera;o.updateMatrixWorld();const n=e.getPluginByName("FADE_TILES_PLUGIN");n.fadeRootTiles=t.fadeRootTiles,n.fadeDuration=t.useFade?t.fadeDuration*1e3:0,e.errorTarget=t.errorTarget,e.setCamera(o),e.setResolutionFromRenderer(o,s),e.update();const i=r.getPluginByName("FADE_TILES_PLUGIN");i.fadeRootTiles=t.fadeRootTiles,i.fadeDuration=t.useFade?t.fadeDuration*1e3:0,r.setCamera(o),r.setResolutionFromRenderer(o,s),r.update(),s.render(l,o),t.fadingGroundTiles=n.fadingTiles+" tiles"}
